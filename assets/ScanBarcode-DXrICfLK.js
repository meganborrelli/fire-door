import{d as B,r as m,o as s,c as v,e as c,u as q,f,h as n,t as o,j as g,w as r,F as b,g as i,V as D,i as I,b as u}from"./index-CQWIQaZf.js";const R={key:0,class:"qr-scanner"},j={key:2},O=B({__name:"ScanBarcode",setup(E){const p=m("Qr value - this will be a unique ID we will have to generate qith a sticker, scan a QR code it works currently"),d=m(null),a=m(!0);function k(t){console.log("hi",t),p.value=t,console.log(p.value.split("id=")[1]),w(p.value.split("id=")[1])}async function w(t){d.value=await fetch(`https://kcmpmbkzfjbiagr.form.io/${t}/submission`).then(e=>e.json()).then(e=>(console.log(e,"boo"),a.value=!1,e.reverse()))}function x(){a.value=!0,d.value=null}function S(t){console.log(t)}return(t,e)=>{const y=i("v-btn"),A=i("v-expansion-panel-title"),C=i("v-expansion-panel-text"),Q=i("v-expansion-panel"),V=i("v-expansion-panels");return s(),v(b,null,[a.value?(s(),v("div",R,[c(q(D.QrcodeStream),{onDecode:e[0]||(e[0]=l=>k(l))})])):f("",!0),n(" "+o(p.value)+" ",1),a.value?f("",!0):(s(),g(y,{key:1,onClick:e[1]||(e[1]=l=>x())},{default:r(()=>e[3]||(e[3]=[n("Scan new QR")])),_:1})),d.value!==null&&!a.value?(s(),v("div",j,[c(V,{class:"pt-5"},{default:r(()=>[(s(!0),v(b,null,I(d.value,(l,_)=>(s(),g(Q,{onClick:e[2]||(e[2]=N=>S(N)),key:_,class:"pb-3",value:"header"},{default:r(()=>[c(A,{"hide-actions":""},{default:r(()=>[n(" Report "+o(_+1),1)]),_:2},1024),c(C,null,{default:r(()=>[n(" Inpection Date: "+o(l.created),1),e[4]||(e[4]=u("br",null,null,-1)),e[5]||(e[5]=n(" Is following checks meet safety criteria: ")),e[6]||(e[6]=u("br",null,null,-1)),n(" Glass inspection: "+o(l.data.confirmAllAreSafe.glass),1),e[7]||(e[7]=u("br",null,null,-1)),n(" Hinges inspection: "+o(l.data.confirmAllAreSafe.glass),1),e[8]||(e[8]=u("br",null,null,-1)),n(" Overall inspection: "+o(l.data.confirmAllAreSafe.glass),1),e[9]||(e[9]=u("br",null,null,-1)),n(" Additional Notes: "+o(l.data.notes),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):f("",!0)],64)}}});export{O as default};
